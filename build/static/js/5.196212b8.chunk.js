(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[5],{372:function(e,t,a){"use strict";a.r(t);var l=a(0),c=a(18),i=a(379),s=a(75),r=a.n(s),n=a(64),o=a(41),d=a(387),u=a(45),j=a(374),b=a(55),m=a(54),h=a(62),O=a(58),x=a(57),v=a(5);t.default=()=>{var e;const[t,a]=Object(l.useState)(!1),[s,g]=Object(l.useState)([]),[p,f]=Object(l.useState)([]),[y,w]=Object(l.useState)(!1),[N,S]=Object(l.useState)("password"),[C,L]=Object(l.useState)(!1),[W,A]=Object(l.useState)(!1),[F,I]=Object(l.useState)(!1),[T,U]=Object(l.useState)(""),[E,H]=Object(l.useState)("info"),[B,k]=Object(l.useState)([]),[q,M]=Object(l.useState)(""),[D,_]=Object(l.useState)(""),[z,R]=Object(l.useState)(""),[$,G]=Object(l.useState)(""),[J,P]=Object(l.useState)(!1),[V,K]=Object(l.useState)(null),[Q,X]=Object(l.useState)(null),[Y,Z]=Object(l.useState)(""),ee=async()=>{a(!0);try{const e=Object(o.b)(u.b,"Newchannels"),t=(await Object(o.f)(e)).docs.map((e=>({id:e.id,...e.data()})));console.log("CHANNNELS ======> ",null===t||void 0===t?void 0:t.slice(0,20)),g(t),f(t),a(!1)}catch(e){throw console.error("Error fetching channels with categories:",e),a(!1),e}},te=e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{R(e.result)},e.readAsDataURL(t)}else R(null);t&&(e=>{if(!e)return;P(!0);const t=`${(new Date).getTime()}_${null===e||void 0===e?void 0:e.name}`,a=Object(x.c)(u.c,`UserImages/${t}`);Object(x.d)(a,e).then((e=>{Object(x.a)(e.ref).then((e=>{ce("Image Added Sucessfully","success"),_(e),P(!1)}))}))})(t)},ae={cat:(e=>{const t=B.find((t=>t.name===e));return null===t||void 0===t?void 0:t.id})(null===$||void 0===$||null===(e=$.category)||void 0===e?void 0:e.name),title:null===$||void 0===$?void 0:$.title,url:null===$||void 0===$?void 0:$.url},le=m.a().shape({cat:m.c().required("Category name is required"),title:m.c().required("Title is required"),url:m.c().required("Feed url is required")}),ce=(e,t)=>{U(e),H(t),I(!0)};Object(l.useEffect)((()=>{ee(),(async()=>{try{const e=Object(o.b)(u.b,"category"),t=(await Object(o.f)(e)).docs.map((e=>({id:e.id,...e.data()})));return k(t),t}catch(e){throw console.error("Error fetching categories:",e),e}})()}),[]);const ie=(e,t)=>{const a="asc"===t?"desc":"asc";if("Title"==e){const e=[...p].sort(((e,t)=>{const l=e.title.charAt(0).toLowerCase(),c=t.title.charAt(0).toLowerCase();return"asc"===a?l<c?-1:l>c?1:0:l>c?-1:l<c?1:0}));K(a),f(e)}else if("Cat Name"==e){const e=[...p].sort(((e,t)=>{var l,c,i,s;const r=null===e||void 0===e||null===(l=e.category)||void 0===l||null===(c=l.name)||void 0===c?void 0:c.charAt(0).toLowerCase(),n=null===t||void 0===t||null===(i=t.category)||void 0===i||null===(s=i.name)||void 0===s?void 0:s.charAt(0).toLowerCase();return console.log(r,n),"asc"===a?r<n?-1:r>n?1:0:r>n?-1:r<n?1:0}));X(a),f(e)}};Object(l.useEffect)((()=>{const e=setTimeout((()=>{if(Y){const e=null===p||void 0===p?void 0:p.filter(((e,t)=>{var a,l;return null===e||void 0===e||null===(a=e.title)||void 0===a||null===(l=a.toLowerCase())||void 0===l?void 0:l.includes(null===Y||void 0===Y?void 0:Y.toLowerCase())}));f(e)}else f(s)}),500);return()=>{clearTimeout(e)}}),[Y,s]);const se=e=>{let{name:t,sortOrder:a}=e;return Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(v.jsx)("span",{children:t}),a&&Object(v.jsx)("span",{style:{marginLeft:"5px"},children:"asc"===a?Object(v.jsx)("div",{onClick:()=>ie(t,a),children:Object(v.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"currentColor",children:[Object(v.jsx)("path",{d:"M7 14l5-5 5 5H7z"})," "]})}):"desc"===a?Object(v.jsx)("div",{onClick:()=>ie(t,a),children:Object(v.jsxs)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"currentColor",children:[Object(v.jsx)("path",{d:"M7 10l5 5 5-5H7z"})," "]})}):null})]})},re=[{name:"#",selector:(e,t)=>t,maxWidth:"7rem",minWidth:"2rem"},{name:"Image",selector:e=>Object(v.jsx)(n.a,{classes:"tableImg",imageUrl:null===e||void 0===e?void 0:e.imageUrl,circeltrue:!0}),maxWidth:"7rem",minWidth:"2rem"},{name:Object(v.jsx)(se,{name:"Title",sortOrder:V||"asc"}),selector:e=>null===e||void 0===e?void 0:e.title,maxWidth:"10rem",minWidth:"4rem"},{name:Object(v.jsx)(se,{name:"Cat Name",sortOrder:Q||"asc"}),selector:e=>{var t;return null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name},maxWidth:"7rem",minWidth:"2rem"},{name:"Feed Url",selector:e=>null===e||void 0===e?void 0:e.url,maxWidth:"30rem",minWidth:"20rem"},{name:"Actions",cell:e=>Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{className:"loginBtn2",style:{cursor:"pointer",padding:"2px 10px"},onClick:()=>(e=>{G(e),M(null===e||void 0===e?void 0:e.id),_(null===e||void 0===e?void 0:e.imageUrl),w(!0)})(e),children:"Edit"}),Object(v.jsx)("button",{className:"loginBtn2",style:{cursor:"pointer",padding:"2px 10px",marginLeft:20},onClick:()=>(async e=>{try{const t=Object(o.b)(u.b,"Newchannels");await Object(o.c)(Object(o.d)(t,e)),ee()}catch(t){console.error("Error deleting channel:",t)}})(e.id),children:"Delete"})]}),maxWidth:"10rem",minWidth:"10rem"}];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(h.a,{open:F,message:T,severity:E,onClose:()=>{I(!1)}}),Object(v.jsx)(j.a,{title:"Basic Modal",footer:!1,open:y,centered:!0,onCancel:()=>{w(!1)},children:Object(v.jsx)(b.a,{initialValues:ae,enableReinitialize:!0,validationSchema:le,onSubmit:(e,t)=>{let{setSubmitting:a}=t;(async e=>{A(!0);try{const t=Object(o.d)(u.b,"category",null===e||void 0===e?void 0:e.cat),a=await Object(o.e)(t);if(!a.exists())throw A(!1),new Error("Category not found");const l=a.data();let c;return Object(o.b)(u.b,"Newchannels"),q&&(c=Object(o.d)(u.b,"Newchannels",q),await Object(o.j)(c,{title:null===e||void 0===e?void 0:e.title,imageUrl:D,url:null===e||void 0===e?void 0:e.url,category:l,sub:[],download:[],star:[]}),w(!1),ce("Podcast Updated Successfully","success")),c.id}catch(t){throw A(!1),console.error("Error adding or updating channel:",t),t}})(e)},children:e=>{let{values:t,errors:a,touched:l,handleChange:s,handleBlur:r,handleSubmit:n}=e;return Object(v.jsx)(i.a,{className:"formHead",onSubmit:n,children:Object(v.jsxs)("section",{children:[Object(v.jsxs)(i.a.Group,{className:"mb-2 hideFocus2",controlId:"formGroupEmail",children:[Object(v.jsx)(i.a.Label,{className:"lableHead",children:"Add Category"}),Object(v.jsx)(i.a.Select,{"aria-label":"Default select example",className:"radius_12",name:"cat",value:t.cat,onChange:s,children:B.map((e=>Object(v.jsx)("option",{value:e.id,children:e.name},e.id)))}),l.cat&&a.cat&&Object(v.jsx)("div",{className:"errorMsg",children:a.cat}),Object(v.jsx)(i.a.Label,{className:"lableHead mt-3",children:"Add Title"}),Object(v.jsx)(i.a.Control,{className:"radius_12 ",placeholder:"Title",name:"title",value:t.title,onChange:s}),l.title&&a.title&&Object(v.jsx)("div",{className:"errorMsg",children:a.title}),Object(v.jsx)(i.a.Label,{className:"lableHead mt-3",children:"Add Feed Url"}),Object(v.jsx)(i.a.Control,{className:"radius_12 ",placeholder:"Url",name:"url",value:t.url,onChange:s}),l.url&&a.url&&Object(v.jsx)("div",{className:"errorMsg",children:a.url})]}),Object(v.jsxs)("div",{className:"d-flex ",style:{flexDirection:"column"},children:[Object(v.jsx)("h6",{className:"lableHead mt-2 mb-2",children:"Upload Image"}),Object(v.jsxs)("div",{children:[Object(v.jsxs)("label",{style:{cursor:"pointer",position:"relative"},htmlFor:"fileInput",className:"cursor-pointer",children:[J&&Object(v.jsx)(c.a,{style:{width:"18px",height:"18px",marginTop:"3px",borderWidth:"0.15em",position:"absolute",top:"2rem",right:"2.5rem",zIndex:"99999",color:"white"},animation:"border",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),D?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("img",{src:D,alt:"Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"50%",position:"relative"},className:"object-cover"})}):Object(v.jsx)("div",{className:"border radius_50 flex justify-content-center items-center",children:Object(v.jsx)("img",{src:O.a,alt:"Camera Icon",width:80,height:80})})]}),Object(v.jsx)(d.a,{type:"file",id:"fileInput",className:"visually-hidden",onChange:te})]})]}),Object(v.jsx)("div",{className:"d-flex flex-column w-50",children:Object(v.jsx)("button",{disabled:W,className:"loginBtn mt-3 "+(W?"disbalebtn":""),children:W?Object(v.jsx)(c.a,{style:{width:"18px",height:"18px",marginTop:"3px",borderWidth:"0.15em"},animation:"border",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):"Submit"})})]})})}})}),t?Object(v.jsx)("div",{className:"text-center",children:Object(v.jsx)(c.a,{style:{width:"18px",height:"18px",marginTop:"3px",borderWidth:"0.15em"},animation:"border",role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"cat-input-con",children:Object(v.jsx)("input",{type:"text",value:Y,onChange:e=>{Z(e.target.value)},placeholder:"Search for category",className:"cat-input"})}),Object(v.jsx)(r.a,{columns:re,data:p,pagination:!0})]})]})}}}]);
//# sourceMappingURL=5.196212b8.chunk.js.map